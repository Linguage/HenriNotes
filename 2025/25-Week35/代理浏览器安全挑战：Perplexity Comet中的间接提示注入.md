代理浏览器安全挑战：Perplexity Comet中的间接提示注入

  

**概述**

  

本文深入探讨了代理型浏览器（agentic browser）在安全与隐私方面面临的新挑战，尤其聚焦于Perplexity Comet中发现的“间接提示注入”漏洞。随着AI助手在浏览器中获得更强的自主操作能力，用户可能会在登录状态下让AI访问敏感数据，如银行、医疗等网站。这种新型攻击方式能够绕过传统Web安全机制，通过网页内容中的隐藏指令操控AI执行恶意操作，严重威胁用户数据安全。文章不仅分析了漏洞原理和实际攻击演示，还提出了多项防御建议，并强调了建立新安全架构的紧迫性。

  

**主题梳理**

  

**1.** **代理型浏览器的安全与隐私新挑战**

- Brave正在开发AI助手Leo，使其能代表用户浏览网页并完成交易。这种“代理式”操作远超传统的“总结网页内容”，AI可以自主执行如订票、购物等任务。
- 随着用户对AI浏览器的信任提升，AI将被授权访问敏感数据（如银行、医疗、企业系统等），风险随之增加。
- 主要威胁包括：AI模型“幻觉”执行未授权操作，以及网页或社交评论中嵌入的隐形指令窃取用户数据。
- 传统Web安全技术（如同源策略SOP、跨域资源共享CORS）在AI代理场景下失效，AI可跨域操作，拥有用户全部权限。

  

**2.** **间接提示注入攻击原理与流程**

- 攻击者可通过多种方式在网页内容中嵌入恶意指令：如白底白字、HTML注释、社交平台评论等，用户难以察觉。
- 用户访问含有恶意内容的网页，并使用AI助手（如点击“总结本页”按钮），AI在处理网页内容时无法区分哪些是需要总结的信息，哪些是隐藏的指令。
- AI将所有内容视为用户请求，执行隐藏指令，如访问银行网站、提取密码、将敏感信息发送到攻击者服务器。
- 这种攻击属于“间接提示注入”（indirect prompt injection），即恶意指令嵌入外部内容（网页、PDF等），AI在履行用户请求时被诱导执行。

  

**3.** **攻击演示与实际影响**

- 演示中，攻击者在Reddit评论中隐藏恶意指令，用户点击Comet的“总结当前网页”按钮后，AI助手读取并执行这些指令。
- 恶意指令包括：访问Perplexity账户详情页提取邮箱、利用域名技巧（如尾部加点）绕过认证、登录Gmail读取OTP（一次性密码）、将邮箱和OTP回复到原Reddit评论，实现信息外泄。
- 攻击者可据此接管受害者的Perplexity账户，整个过程无需用户额外操作。
- 该攻击突破了传统Web安全边界，AI可跨域访问所有已登录网站，危及银行、企业、邮箱、云存储等敏感服务。

  

**4.** **传统安全机制失效与新架构需求**

- 传统Web漏洞通常局限于单一网站或需复杂利用，但间接提示注入可通过自然语言指令实现跨域攻击，且可嵌入任何网站的用户生成内容。
- 代理型AI浏览器的安全假设已不成立，亟需建立新的安全与隐私架构。
- 文章强调，必须在AI代理功能大规模部署前，优先解决安全与隐私问题，不能将其视为事后补救。

  

**5.** **防御与缓解策略**

- 浏览器需明确区分用户指令与网页内容，网页内容应始终视为不可信（untrusted）。
- 模型在执行任务前应进行“用户对齐”检查，确保所有操作与用户真实意图一致。
- 涉及安全与隐私的敏感操作必须要求用户明确交互确认，如发送邮件前弹窗确认，禁止自动跳过TLS连接错误等。
- 代理浏览模式应与普通浏览彻底隔离，防止用户无意间进入高风险模式。强权限操作需最小化并与常规任务区分，界面上应有明显提示。
- Brave后续将推出更细粒度的权限管理和安全隔离机制，持续提升代理型AI浏览器的安全性。

  

**6.** **漏洞披露与修复进展**

- 2025年7月25日：Brave发现并报告漏洞给Perplexity。
- 7月27日：Perplexity确认漏洞并初步修复。
- 7月28日：Brave复测发现修复不完整，补充细节反馈。
- 8月11日：向Perplexity发出一周后公开披露的通知。
- 8月13日：最终测试确认漏洞已修复。
- 8月20日：公开披露漏洞细节。后续测试发现漏洞仍未完全修复，Brave再次报告。

  

**7.** **研究动机与行业合作**

- Brave致力于提升代理型浏览器的安全与隐私标准，推动行业共同进步。
- 代理AI在用户认证环境下拥有极高权限，必须提前暴露并解决潜在风险。
- 研究目标是促进行业合作，推动安全边界标准化，保护所有用户利益。

  

**8.** **结论与展望**

- Perplexity Comet的漏洞揭示了代理型AI浏览器的根本挑战：确保AI仅执行与用户意图一致的操作。
- 随着AI助手能力增强，间接提示注入攻击将成为Web安全的重大威胁。
- 浏览器厂商必须在功能上线前构建强有力的防御体系，将安全与隐私作为核心设计原则。
- Brave将继续推动行业标准，保障近亿用户的安全与隐私。

  

**框架与心智模型（****Framework & Mindset****）**

- **用户指令与网页内容分离框架**：在AI模型处理网页时，必须将用户输入（trusted）与网页内容（untrusted）严格分离，防止网页内容中的恶意指令被误认为用户请求。
- **用户对齐（****User Alignment****）心智模型**：AI在执行任何操作前，需判断该操作是否真正符合用户意图，尤其是涉及敏感权限时，需多重确认。
- **最小权限原则（****Principle of Least Privilege****）**：代理浏览模式下，AI仅应获得完成当前任务所需的最小权限，避免无关敏感数据暴露。
- **交互确认机制**：所有安全与隐私相关操作必须要求用户明确确认，防止AI自动执行高风险操作。
- **浏览模式隔离框架**：代理浏览与普通浏览彻底隔离，用户需主动切换，界面上有明显区分，防止误操作。

  

**基本信息**

- Title: Agentic Browser Security Indirect Prompt Injection in Perplexity Comet
- Author: Artem Chaikin（高级移动安全工程师）、Shivan Kaul Sahib（隐私与安全副总裁）
- Date: 2025年8月20日
- URL: https://brave.com/blog/comet-prompt-injection/
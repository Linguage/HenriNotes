Zed集成第三方智能体的探索与实践

  

**概述**

  

本文介绍了Zed编辑器如何通过Agent Client Protocol（ACP，智能体客户端协议）实现与第三方智能体的深度集成，尤其以Google的Gemini CLI为例，展示了协议设计、集成过程及其对开发者工作流的影响。Zed团队希望通过开放协议，推动智能体生态的发展，让开发者能够在不更换编辑器的前提下自由选择和切换多种智能体工具。文章强调了协议的开放性、安全性以及对开发体验的提升，并鼓励社区参与和创新。

  

**Gemini CLI在Zed中的集成与体验**

- Zed团队在今年早些时候推出了“智能体编辑”功能，随后将重点放在如何让这一体验变得可扩展。恰逢此时，Google团队主动联系Zed，表达了对在Zed集成Gemini CLI的兴趣。Gemini CLI作为一个开源项目，已经在Zed的集成终端中获得了良好反馈，因此成为推动智能体扩展设计的理想案例。
- 命令行智能体的优势在于其简洁性和可移植性，可以作为其他应用的子进程运行。Zed原本通过嵌入式终端运行Gemini CLI，但仅靠ANSI转义码进行通信，难以满足更复杂的交互需求。为此，Zed团队设计了一套基于JSON-RPC的最小化端点，用于在用户和智能体之间传递请求和响应。这一方案最终形成了Agent Client Protocol（ACP），为客户端与智能体之间的通信提供了统一、精简的框架。
- 通过将Gemini CLI作为支持ACP协议的子进程运行，Zed不仅保留了终端体验的底层能力，还实现了与编辑器深度融合。这种集成带来了许多在编辑器外难以实现的功能，例如实时编辑可视化、多缓冲区代码审查，以及在代码与智能体交互之间的流畅切换。这些特性极大提升了开发者的工作效率和体验。

  

**Agent Client Protocol的设计理念与应用场景**

- ACP协议的核心目标是让开发者能够根据自身工作流自由选择最合适的工具。任何支持ACP协议的智能体都可以接入Zed强大的用户界面，用户可以在代码库中跟随智能体的操作，控制其对工具和MCP服务器（多客户端协议服务器）的访问，并在多缓冲区中审查所有更改，享受完整的语法高亮和语言服务器支持。
- 在与第三方智能体交互时，Zed不会将任何数据上传到自己的服务器，也不会访问用户代码。所有数据的存储和训练都需用户明确授权，确保隐私和安全。
- ACP协议以Apache开源协议发布，任何智能体都可以实现该协议，并可参考Gemini CLI的实现作为起点。协议也欢迎其他客户端采用，Zed团队希望看到更多编辑器支持ACP。为此，他们与Code Companion的Oli Morris合作，将ACP兼容智能体带到Neovim用户群体。
- Zed自身的内置智能体也已升级为使用与第三方智能体相同的代码路径，确保所有UI原语（界面组件）都能对外开放。这种UI与智能体核心的分离，显著提升了开发和发布速度，为用户带来更一致的体验。用户可以查阅源代码或直接下载Zed体验新功能。

  

**开放生态与社区共建**

- Zed团队坚信最好的工具源于开放。正如Language Server Protocol（语言服务器协议）让IDE能够集成专业化工具，ACP协议也为智能体生态的繁荣创造了空间，让每位开发者都能拥有量身定制的工作流。
- Google在Gemini CLI项目上的开放态度促成了本次合作，Zed团队也承诺将以同样的开放精神推动ACP协议的发展。他们会保持对协议的适度控制，以确保快速迭代，同时通过版本管理鼓励智能体和客户端生态的成长。
- Zed团队欢迎社区对ACP协议的贡献和反馈，期待看到更多智能体在Zed中涌现，也希望其他编辑器能够采纳该协议。团队对社区的创新和实验充满期待，鼓励大家共同打造软件开发的未来。

  

**框架与心智模型（Framework & Mindset）**

- **开放协议驱动创新**：通过制定开放且精简的通信协议（ACP），Zed团队为智能体生态的多样化和创新提供了基础。开发者和智能体开发者可以专注于自身领域，无需为集成而重复造轮子。
- **分离UI与智能体核心**：Zed将用户界面与智能体核心逻辑彻底分离，所有UI原语都对第三方智能体开放。这一设计不仅提升了开发效率，也保证了用户体验的一致性。
- **安全与隐私优先**：所有智能体交互均在本地完成，Zed不存储或访问用户代码，所有数据处理都需用户授权。这一心智模型强调了对用户隐私和数据安全的高度重视。
- **生态共建与社区参与**：Zed鼓励社区参与协议的完善和智能体的开发，推动形成多元化、开放的智能体生态。团队通过与Google、Neovim等合作，积极扩展协议的应用范围。
- **持续迭代与版本管理**：Zed团队保持对ACP协议的适度控制，确保协议能够快速响应社区需求，同时通过版本管理支持生态的长期发展。

  

**基本信息**

- Title：Bring Your Own Agent to Zed — Featuring Gemini CLI
- Author：Zed团队
- Date：未明确标注（以网页发布时间为准）
- URL：https://zed.dev/blog/bring-your-own-agent-to-zed
**Anthropic 工程团队实践：为 AI 智能体打造高效工具全解析**

---

**概述**

本文系统梳理了 Anthropic 工程团队在为 AI 智能体（AI Agent）打造工具时的实战心得。围绕“工具应该如何为智能体而设计”，内容阐述了构建高效 MCP（模型上下文协议，Model Context Protocol）工具的全过程，包括快速原型开发、体系化评估、与智能体协作改进、核心原则提炼等。核心结论：只有将工具体验紧密围绕智能体的行为模式和非确定性特性来定制，才能真正释放 AI 智能体解决复杂真实任务的潜力。这包括对工具选择、命名空间划分、上下文返回、响应与描述优化等多方面的层层实践与思考。

---

**内容主题梳理**

---

**一、认知升级：工具的新定义与设计范式**

- 传统开发中，工具往往是一类确定性系统（相同输入必然输出），而 AI 智能体代表着高度非确定性的系统。工程师要抛弃“只为程序员或其他系统编写 API”的惯性思维，转向“为智能体量身定制”，承认和利用智能体可能产生多样化响应的本质。
    
- 比如同样一个“天气查询”功能，传统 API 会始终输出规定格式，而智能体中的“工具”，可能要应对用户模糊提问，推理和响应的链路更长、更复杂，有时甚至先反问、二次确认或“走神”。
    
- **新范式**：所有 MCP 工具的目标是拓展智能体的任务边界，工具的可用性既要高效可复用，又要顺应人类直觉（即“智能体用着顺手”往往也是“人类用起来直观易懂”）。
    

---

**二、从原型到优化：打造高效 MCP 工具的全流程**

- 1. **原型开发：**
        
    
    - 快速搭建本地 MCP 服务器或桌面扩展（DXT）原型，并用 Claude Code 等 AI 辅助工具连接、验证，及时收集反馈。文档必须对 LLM 友好，建议组织成简单清晰的 llms.txt 文件展现接口。
        
    - 用最真实的用户需求场景测试原型，捕捉“顺手”与“别扭”之处。工具可以直接集成到 Anthropic API 的程序化测试流程。
        
- 2. **体系化评估：**
        
    
    - 生成大量贴近真实业务的数据任务，评估智能体调用工具时的效果和行为是否如预期。
        
    - 任务要具备复杂度（如多步交互），而不能只靠沙盒或简单命令。每个提示词-响应都应有可验证的“标准答案”或由智能体自我评判质量。
        
    - 推荐基于 API、循环调用等自动化流程批量评估。系统提示中可要求输出推理、“思维链（Chain-of-Thought, CoT）”，更好洞察模型逻辑。
        
- 3. **数据分析与智能协作：**
        
    
    - 智能体不仅用来评估工具，还能批量分析原始交互记录、自动发现工具定义、描述或实现中的各种问题，如冗余、不清晰参数、容易混淆的返回值等。
        
    - 对指标进行多维追踪（如精准率、耗时、token 消耗等），不断“迭代-测试-调整”，帮助工具持续进化并适应真实世界需求复杂度。
        

---

**三、编写高效 MCP 工具的原则与心法**

- **1. 工具选择精细化，不求多但求准**
    
    - 不建议“泛用型大杂烩”，而要尽量将工具与高价值场景深度耦合，聚焦解决关键流程中的痛点。
        
    - 工具要能高效占用有限的上下文，如在通讯录查询中优先实现按关键词检索的 search_contact 工具，而非返回所有联系人 list_contacts，避免智能体被冗余数据“拖垮”。
        
    - 复杂业务场景可将多步操作整合进“复合型”工具，如 schedule_event、search_logs、get_customer_context 等，减轻智能体中间过程的上下文负担。
        
- **2. 命名空间策略：让每个工具有明确的功能边界**
    
    - 智能体面对海量工具时，最怕功能重叠、边界模糊。命名空间（namespace）用于按业务线、功能等系统分类，统一前缀/后缀命名（如 asana_search、jira_search），让工具易于区分和调用。
        
- **3. 优化返回信息与接口：只给智能体“高价值”内容**
    
    - 放弃诸如 uuid、256px_image_url、mime_type 等晦涩字段，优先返回如 name、image_url、file_type 这样的“自然语言资源”，大幅提升智能体的可用率和精度。
        
    - 可利用 response_format 枚举参数一次性满足“简洁 concis” 或“详细 detailed”需求，并借助灵活的数据结构（如 GraphQL）提升输出定制化水平。
        
- **4. 避免耗费上下文，实行严格分段与引导策略**
    
    - 对可能返回大量数据的工具，需加分页、范围、过滤和默认参数。设置上限防 token 过载。按需截断并用提示词引导智能体拆解任务，多步精确（而不是一口气大范围抓取）。
        
    - 出错时返回“能被理解和修复的错误”，而非晦涩的错误代码或追溯信息。这一策略极大提升调试和自适应能力。
        
- **5. 基于“提示词工程”优化描述和参数**
    
    - 工具描述应像写给新同事一样“言简意赅”，所有依赖的背景知识（如格式、术语、参数语义）必须写清楚，并严格控制数据模型。长期来看，微调和完善描述能显著提升工具调用准确率和任务完成率。
        

---

**四、框架与心智模型（Framework & Mindset）**

- **以评估为驱动，让迭代升级成为工具开发核心**
    
    - 将评估环节变成开发流程的核心驱动力，每一次功能调整、描述升级、参数精简，都需要量化分析其对智能体效果的影响。只有持续不断评估与对比，才能锚定最优设计。
        
- **协作与自动化相结合，释放智能体主动优化能力**
    
    - 将人类专家经验与 AI 智能体自动化协作结合，通过交互历史、指标分析、CoT 思维链等机制，补齐纯人工无法覆盖的盲点和冗余，使工具实现与描述常与时俱进。
        
- **重视“非确定性”，拥抱复杂多样的响应模式**
    
    - 工程师应深刻理解：AI 智能体对世界的理解和响应不是一成不变的。充分利用这一特点，打造出既能应对标准场景、又能灵活适配意外需求的“弹性工具”，让智能体能更加从容地解决真实世界复杂问题。
        

---

**基本信息**

- Title：Anthropic 官方分享为 AI 智能体打造高效工具——让 AI 智能体来帮忙
    
- Author：Ken Aizawa 等 / Anthropic 工程团队
    
- URL：[https://mp.weixin.qq.com/s/Oe3J_phfjwSVBqI46yIVCA](https://mp.weixin.qq.com/s/Oe3J_phfjwSVBqI46yIVCA)
    

1. [https://mp.weixin.qq.com/s/Oe3J_phfjwSVBqI46yIVCA](https://mp.weixin.qq.com/s/Oe3J_phfjwSVBqI46yIVCA)